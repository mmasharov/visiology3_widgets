# Примеры кастомных виджетов Visiology 3

### Счетчик посещений на основе стандартного виджета "Текст"

Код : counter.js

Виджет основан на запросах к API встроенной системе мониторинга Grafana

Предварительные настройки:
1. Создать токен авторизации Графаны  
Зайти в интерфейс Графаны адрес_платформы/v3/grafana
В разделе Administration - Service Accounts создать сервисную учетку с ролью Viewer, создать в ней токен авторизации API.
2. В установке Visiology3 по умолчанию ID источника данных Loki скорее всего будет равен 3, но на всяякий случай лучше убедиться, выполнив запрос на эндпоинт адрес_платформы//v3/grafana/api/datasources

Использование:
На дашборде создать стандартный виджет "Текст".
Включить в основных настройках возможность редактирования кода виджета.
Заменить код виджета кодом из прилагаемого файла.

![Counter1](img/counter1.png)
![Counter2](img/counter2.png)